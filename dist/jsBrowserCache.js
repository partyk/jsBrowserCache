!function(t,e){if("function"==typeof define&&define.amd)define(["exports"],e);else if("undefined"!=typeof exports)e(exports);else{var s={};e(s),t.JsBrowserCache=s}}(this,function(t){"use strict";function r(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._options=Object.assign({},{prefix:"cache-",storage:"local"},t||{}),this._seconds=1e3,this._setStorage(),this.testSupportsStorage()}return function(t,e,s){e&&r(t.prototype,e),s&&r(t,s)}(e,[{key:"testSupportsStorage",value:function(){var t="j8EiBTWwQV";if(void 0!==this._supportsStorage)return this._supportsStorage;if(!this._storage)return this._supportsStorage=!1;try{this._setItem(t,"j8EiBTWwQV"),this._removeItem(t),this._supportsStorage=!0}catch(t){this._IsExceptionOutOfSpace(t)&&this._storage.length?this._supportsStorage=!0:this._supportsStorage=!1}return this._supportsStorage}},{key:"isSupportsStorage",value:function(){return this._supportsStorage,this._supportsStorage}},{key:"setItem",value:function(e,t,s){var r,i=(new Date).getTime();if(!this.isSupportsStorage())return!1;r={value:this._jsonToString(t),create:i,expire:s?i+1*s*this._seconds:""};try{return this._removeItem(e),this._setItem(e,this._jsonToString(r)),!0}catch(t){return!(!this._IsExceptionOutOfSpace(t)||!this._storage.length)&&(this.clearExpirate(),this._setItem(e,this._jsonToString(r)),!!this._getItem(e))}}},{key:"getItem",value:function(t){var e;return this.isSupportsStorage()&&(e=this._getItem(t))?(e=this._stringToJson(e)).expire&&(new Date).getTime()>e.expire?(this._removeItem(t),null):this._stringToJson(e.value):null}},{key:"clearExpired",value:function(){var t,e=this;if(!this.isSupportsStorage())return null;if(0<this._storage.length&&0<(t=Object.keys(this._storage).filter(function(t){return 0===t.indexOf(e._options.prefix)})).length)for(var s=0,r=t.length;s<r;s++){var i=t[s].replace(this._options.prefix,""),o=this._stringToJson(this._getItem(i));o.expire&&(new Date).getTime()>o.expire&&this._removeItem(i)}}},{key:"_setStorage",value:function(t){try{this._storage="session"!==t?localStorage:sessionStorage}catch(t){this._storage=!1}}},{key:"_setItem",value:function(t,e){this._storage.setItem(this._options.prefix+t,e)}},{key:"_getItem",value:function(t){return this._storage.getItem(this._options.prefix+t)}},{key:"_removeItem",value:function(t){this._storage.removeItem(this._options.prefix+t)}},{key:"_jsonToString",value:function(t){return JSON.stringify(t)}},{key:"_stringToJson",value:function(t){return JSON.parse(t)}},{key:"_IsExceptionOutOfSpace",value:function(t){return t&&"QUOTA_EXCEEDED_ERR"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name||"QuotaExceededError"===t.name}}]),e}();t.default=e});